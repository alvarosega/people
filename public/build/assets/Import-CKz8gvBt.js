import{c as D,r as d,j as e,H as S,L as u,b as L}from"./app-BKfOqTMF.js";import{A as F}from"./AuthenticatedLayout-C2R_dg5o.js";import{c as v}from"./createLucideIcon-CkFK_HPH.js";import{A as j}from"./arrow-left-HVC2zwfX.js";import{C as x}from"./circle-check-big-CJQNbpwr.js";import{C as f,F as b}from"./file-text-CCFY-_87.js";import{U as m}from"./upload-BlJwprxu.js";import{D as A}from"./download-d8FVR27l.js";import{L as I}from"./loader-Cp2DLt5B.js";import"./transition-BC6w5YbO.js";import"./ThemeToggle-DVrhrRCS.js";/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],g=v("file-check",U);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],R=v("users",V);function G(){const{flash:o={}}=D().props,[t,l]=d.useState(null),[h,c]=d.useState(!1),[N,i]=d.useState(!1),n=s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?i(!0):s.type==="dragleave"&&i(!1)},y=s=>{if(s.preventDefault(),s.stopPropagation(),i(!1),s.dataTransfer.files&&s.dataTransfer.files[0]){const a=s.dataTransfer.files[0];a.type==="text/csv"||a.name.endsWith(".csv")?l(a):alert("Por favor, selecciona un archivo CSV válido")}},w=s=>{s.target.files&&s.target.files[0]&&l(s.target.files[0])},k=s=>{if(s.preventDefault(),!t){alert("Selecciona un archivo CSV antes de continuar");return}const a=new FormData;a.append("csv_file",t),c(!0),L.post(route("admin.users.import"),a,{forceFormData:!0,onSuccess:()=>{l(null),c(!1)},onError:()=>c(!1)})},C=()=>{const s=`legajo,nombre,email,region,territorio,puesto,rol
1001,Juan Pérez,juan@empresa.com,Norte,Territorio A,Representante,user
1002,María García,maria@empresa.com,Sur,Territorio B,Supervisor,manager`,a=new Blob([s],{type:"text/csv"}),p=window.URL.createObjectURL(a),r=document.createElement("a");r.href=p,r.download="plantilla-usuarios.csv",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(p)};return e.jsxs(F,{header:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-r from-accent to-accent-gold",children:e.jsx(m,{className:"h-6 w-6 text-black"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-2xl text-text-primary",children:"Importar Usuarios"}),e.jsx("p",{className:"text-text-secondary text-sm",children:"Carga masiva de usuarios desde archivo CSV"})]})]}),children:[e.jsx(S,{title:"Importar Usuarios"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"bg-primary/80 backdrop-blur-xl rounded-2xl border border-white/10 shadow-2xl overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-accent/20 to-accent-gold/20 border-b border-white/10 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-text-primary flex items-center gap-3",children:[e.jsx(g,{className:"h-8 w-8 text-accent"}),"Importación Masiva"]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Carga múltiples usuarios mediante un archivo CSV"})]}),e.jsxs(u,{href:route("admin.users.index"),className:`flex items-center gap-2 bg-white/10 text-text-primary px-4 py-2 rounded-2xl 
                                        hover:bg-white/20 transition-all duration-200`,children:[e.jsx(j,{className:"h-4 w-4"}),"Volver"]})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[o.success&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-500/10 border border-green-500/20 rounded-2xl",children:[e.jsx(x,{className:"h-5 w-5 text-green-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-400 font-medium",children:"¡Importación exitosa!"}),e.jsx("p",{className:"text-green-400/80 text-sm",children:o.success})]})]}),o.error&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/20 rounded-2xl",children:[e.jsx(f,{className:"h-5 w-5 text-red-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-400 font-medium",children:"Error en la importación"}),e.jsx("p",{className:"text-red-400/80 text-sm",children:o.error})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:`relative border-2 border-dashed rounded-2xl p-8 text-center transition-all duration-300
                                        ${N?"border-accent bg-accent/10":"border-white/20 bg-white/5 hover:border-white/30"}
                                        ${t?"border-green-500/50 bg-green-500/5":""}
                                    `,onDragEnter:n,onDragLeave:n,onDragOver:n,onDrop:y,children:[e.jsx("input",{type:"file",accept:".csv",onChange:w,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex justify-center",children:t?e.jsx(x,{className:"h-12 w-12 text-green-500"}):e.jsx(m,{className:"h-12 w-12 text-text-secondary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-text-primary font-medium",children:t?t.name:"Arrastra tu archivo CSV aquí"}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:t?"Archivo listo para importar":"o haz click para seleccionar"})]}),!t&&e.jsx("p",{className:"text-text-secondary/70 text-xs",children:"Formatos soportados: .csv"})]})]}),t&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/5 rounded-2xl",children:[e.jsx(b,{className:"h-5 w-5 text-accent"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-text-primary text-sm font-medium",children:t.name}),e.jsxs("p",{className:"text-text-secondary text-xs",children:[(t.size/1024).toFixed(2)," KB"]})]}),e.jsx("button",{onClick:()=>l(null),className:"p-1 text-text-secondary hover:text-text-primary transition-colors",children:e.jsx(f,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-2xl p-4",children:[e.jsxs("h3",{className:"text-text-primary font-medium mb-3 flex items-center gap-2",children:[e.jsx(b,{className:"h-4 w-4 text-accent"}),"Formato Requerido"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-text-secondary text-sm",children:"El archivo CSV debe contener las siguientes columnas:"}),e.jsx("div",{className:"bg-black/20 rounded-xl p-3",children:e.jsx("code",{className:"text-text-secondary text-xs font-mono",children:"legajo,nombre,email,region,territorio,puesto,rol"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-text-secondary/70 text-xs",children:"Valores de rol: user, manager, admin"}),e.jsxs("button",{type:"button",onClick:C,className:"flex items-center gap-2 text-accent hover:text-accent-yellow text-sm transition-colors",children:[e.jsx(A,{className:"h-3 w-3"}),"Descargar Plantilla"]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 pt-4 border-t border-white/10",children:[e.jsxs("div",{className:"text-text-secondary text-sm",children:[e.jsx("p",{children:"✅ Se crearán usuarios nuevos"}),e.jsx("p",{children:"⚠️ Los usuarios existentes se actualizarán"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(u,{href:route("admin.users.index"),className:`flex items-center gap-2 bg-white/10 text-text-primary px-6 py-3 rounded-2xl 
                                            hover:bg-white/20 transition-all duration-200`,children:[e.jsx(j,{className:"h-4 w-4"}),"Cancelar"]}),e.jsx("button",{type:"submit",onClick:k,disabled:h||!t,className:`flex items-center gap-2 bg-gradient-to-r from-accent to-accent-gold text-black 
                                            font-semibold px-8 py-3 rounded-2xl shadow-lg shadow-yellow-500/25 
                                            transition-all duration-300 hover:shadow-xl hover:shadow-yellow-500/40 
                                            hover:scale-105 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed 
                                            disabled:transform-none`,children:h?e.jsxs(e.Fragment,{children:[e.jsx(I,{className:"h-4 w-4 animate-spin"}),"Importando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"h-4 w-4"}),"Iniciar Importación"]})})]})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:[e.jsx(R,{className:"h-8 w-8 text-accent mb-2"}),e.jsx("h4",{className:"text-text-primary font-medium text-sm",children:"Usuarios Masivos"}),e.jsx("p",{className:"text-text-secondary text-xs mt-1",children:"Importa hasta 1000 usuarios en una sola operación"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:[e.jsx(g,{className:"h-8 w-8 text-accent mb-2"}),e.jsx("h4",{className:"text-text-primary font-medium text-sm",children:"Validación Automática"}),e.jsx("p",{className:"text-text-secondary text-xs mt-1",children:"El sistema valida el formato y datos antes de importar"})]}),e.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:[e.jsx(x,{className:"h-8 w-8 text-accent mb-2"}),e.jsx("h4",{className:"text-text-primary font-medium text-sm",children:"Resultados Detallados"}),e.jsx("p",{className:"text-text-secondary text-xs mt-1",children:"Reporte completo de usuarios creados y actualizados"})]})]})]})})]})}export{G as default};
